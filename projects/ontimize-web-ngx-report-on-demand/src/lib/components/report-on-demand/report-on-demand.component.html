<div class="dialog-container">
  <button mat-icon-button class="close" [mat-dialog-close]="true">
    <mat-icon class="close-icon">close</mat-icon>
  </button>
  <button mat-icon-button class="close" #configurationMenuButton [matMenuTriggerFor]="configurationMenu"><span
      class="material-icons">
      settings
    </span></button>
  <mat-menu #configurationMenu="matMenu">
    <button mat-button (click)="openSavePreferences()" value="save">{{ 'TABLE.BUTTONS.SAVE_CONFIGURATION' |
      oTranslate }}</button>
    <button mat-button [matMenuTriggerFor]="menu">{{ 'TABLE.BUTTONS.APPLY_CONFIGURATION' |
      oTranslate }}</button>
  </mat-menu>
  <button mat-icon-button class="close" [mat-dialog-close]="true">
    <mat-icon class="close-icon">close</mat-icon>
  </button>
  <button mat-icon-button class="close" (click)="resize()"><span class="material-icons">
      content_copy
    </span></button>
  <div style="width: 28%; float:left">
    <mat-form-field class="example-full-width">
      <input [(ngModel)]="title" matInput placeholder="Título del informe">
    </mat-form-field>
    <mat-form-field class="example-full-width">
      <input [(ngModel)]="subtitle" matInput placeholder="Subtítulo del informe">
    </mat-form-field>
    <mat-accordion>
      <mat-expansion-panel class="acordions">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Orientación
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div fxLayout=row>
          <mat-radio-group name="Orientation" [(ngModel)]="selectedOrientation">
            <mat-radio-button *ngFor="let o of orientation" name="Orientation" [value]="o" style="margin: 10px">
              {{o}}
            </mat-radio-button>
          </mat-radio-group>

        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <mat-menu #menu="matMenu">
      <button (click)="changePreferences(option)" *ngFor="let option of ordersDataPreferences" [value]="option"
        mat-menu-item>
        {{option.NAME}}
      </button>
    </mat-menu>
    <mat-accordion>
      <mat-expansion-panel class="acordions">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Estilo
          </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-selection-list dense #settings>
          <mat-list-option checkboxPosition="before" *ngFor="let choice of dataArray"
            (click)="onAreaSettingsListControlChanged(settings)"
            [selected]="selectedStyleFunctions.includes(choice.value)" [value]="choice.value">
            <div fxLayout="row">
              <span fxFlex>
                {{choice.viewValue}}
              </span>
            </div>
          </mat-list-option>
        </mat-selection-list>
      </mat-expansion-panel>
    </mat-accordion>
    <mat-accordion>
      <mat-expansion-panel class="acordions" [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Columnas a imprimir
          </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-selection-list dense #choices>
          <mat-list-option checkboxPosition="before" *ngFor="let choice of ordersData"
            (click)="onAreaListControlChanged(choices)" [selected]="selectedOptions.includes(choice)" [value]="choice">
            <div fxLayout="row">
              <span fxFlex>
                {{choice|oTranslate}}
              </span>
              <button class="edit" mat-icon-button (click)="mostrarDialogo(choice)"><span class="material-icons">
                  edit
                </span></button>
            </div>
          </mat-list-option>
        </mat-selection-list>
        <button class="sort" mat-button (click)="sortColumns()" [disabled]="selectedOptions.length<2"><span
            class="material-icons">
            sort_by_alpha
          </span></button>
      </mat-expansion-panel>
    </mat-accordion>
    <mat-accordion>
      <mat-expansion-panel class="acordions">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Grupos
          </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-selection-list dense #choices2>
          <mat-list-option checkboxPosition="before" *ngFor="let choice of ordersData2"
            (click)="onAreaListControlChanged2(choices2)" [selected]="selectedGroups.includes(choice)" [value]="choice">
            {{choice|oTranslate}}
          </mat-list-option>
        </mat-selection-list>
        <button class="sort" mat-button (click)="sortGroups()" [disabled]="selectedGroups.length<2"><span
            class="material-icons">
            sort_by_alpha
          </span></button>
      </mat-expansion-panel>
    </mat-accordion>
    <mat-accordion>
      <mat-expansion-panel class="acordions">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Funciones
          </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-selection-list dense #functions>
          <mat-list-option checkboxPosition="before" *ngFor="let function of ordersDataFunctions"
            (click)="onAreaListControlChangedFunctions(functions)" [selected]="selectedOptions.includes(function)"
            [value]="function">
            <div fxLayout="row">
              <span fxFlex>
                {{function|oTranslate}}
              </span>
              <button class="select" mat-icon-button (click)="selectFunction(function)"><span class="material-icons">
                  edit
                </span></button>
            </div>
          </mat-list-option>
        </mat-selection-list>
      </mat-expansion-panel>
    </mat-accordion>
    <mat-accordion>
      <mat-expansion-panel class="acordions">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Configuración
          </mat-panel-title>
        </mat-expansion-panel-header>
        <button mat-button [matMenuTriggerFor]="menu">Seleccionar configuración</button>
        <button mat-button (click)="openSavePreferences()" value="save">Guardar configuración</button>
      </mat-expansion-panel>
    </mat-accordion>
    <div>
      <mat-button-toggle-group>
        <mat-button-toggle class="aceptar" (click)="confirmado()" [disabled]="selectedOptions.length==0"
          value="aceptar">
          Previsualizar</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </div>
  <div class="pdf-container" style="width: 70%; float:right">
    <ngx-extended-pdf-viewer #pdfViewer [base64Src]="pdf" useBrowserLocale="true" delayFirstView="1000" height="80vh"
      width [textLayer]="true"></ngx-extended-pdf-viewer>
  </div>
</div>
