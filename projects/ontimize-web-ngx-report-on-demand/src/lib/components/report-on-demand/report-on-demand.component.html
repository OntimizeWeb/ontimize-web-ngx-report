<div mat-dialog-title class="dialog-title" fxLayout="row" fxLayoutAlign="space-between center">
  {{ 'REPORT_ON_DEMAND_TITLE' | oReportsTranslate }}
  <div>
    <button mat-icon-button #configurationMenuButton [matMenuTriggerFor]="configurationMenu">
      <mat-icon svgIcon="ontimize:settings"></mat-icon>
    </button>
    <button mat-icon-button aria-label="fullscreen dialog" (click)="setFullscreenDialog()">
      <mat-icon *ngIf="fullscreen">fullscreen_exit</mat-icon>
      <mat-icon *ngIf="!fullscreen">fullscreen</mat-icon>
    </button>
    <button mat-icon-button [mat-dialog-close]="true">
      <mat-icon svgIcon="ontimize:close"></mat-icon>
    </button>
    <mat-menu #configurationMenu="matMenu">
      <button type="button" mat-menu-item (click)="openSavePreferences()">
        {{ 'BUTTONS.SAVE_CONFIGURATION' | oReportsTranslate }}
      </button>
      <button type="button" mat-menu-item (click)="openSaveAsPreferences()">
        {{ 'BUTTONS.SAVEAS_CONFIGURATION' | oReportsTranslate }}
      </button>
      <button type="button" mat-menu-item (click)="onApplyConfigurationClicked()">
        {{'BUTTONS.APPLY_CONFIGURATION'| oReportsTranslate }}
      </button>
    </mat-menu>
  </div>
</div>
<div #dialog mat-dialog-content class="dialog-container">
  <mat-sidenav-container class="mat-sidenav-container" [class.opened]="opened" fxFill>
    <mat-sidenav #sidenav [(opened)]="opened" mode="side" class="report-on-demand-sidenav">
      <div fxLayout="column" fxFill>
        <o-button (click)="(opened=!opened) && (showButton=true)" icon="dehaze" type="ICON" label=""
          [matTooltip]="(sidenav.opened?'HIDE_FILTERS':'SHOW_FILTERS') | oTranslate">
        </o-button>

        <div fxLayout="column" *ngIf="opened" class="container-title">
          <mat-form-field>
            <input [(ngModel)]="title" matInput placeholder="{{ 'TITLE' | oReportsTranslate }}">
          </mat-form-field>
          <mat-form-field>
            <input [(ngModel)]="subtitle" matInput placeholder="{{ 'SUBTITLE' | oReportsTranslate }}">
          </mat-form-field>
        </div>

        <mat-accordion multi="true" displayMode="flat" fxFlex="1 1 auto" *ngIf="opened" [@.disabled]="true">
          <mat-expansion-panel class="acordions">
            <mat-expansion-panel-header collapsedHeight="32px" expandedHeight="32px">
              <mat-panel-title>
                {{ 'ORIENTATION' | oReportsTranslate }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-radio-group name="Orientation" [(ngModel)]="selectedOrientation" fxLayout="column">
              <mat-radio-button *ngFor="let o of orientation" name="Orientation" [value]="o" style="margin: 10px">
                {{o | oReportsTranslate}}
              </mat-radio-button>
            </mat-radio-group>
          </mat-expansion-panel>

          <mat-expansion-panel class="acordions">
            <mat-expansion-panel-header collapsedHeight="32px" expandedHeight="32px">
              <mat-panel-title>
                {{ 'STYLE' | oReportsTranslate }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-selection-list dense #settings [(ngModel)]="selectedStyleFunctions">
              <mat-list-option checkboxPosition="before" *ngFor="let choice of dataArray" [selected]="selectedStyleFunctions.includes(choice.value)"
                [value]="choice.value">
                <div fxLayout="row">
                  <span fxFlex>
                    {{choice.viewValue | oReportsTranslate}}
                  </span>
                </div>
              </mat-list-option>
            </mat-selection-list>
          </mat-expansion-panel>

          <mat-expansion-panel class="acordions" expanded="true">
            <mat-expansion-panel-header collapsedHeight="32px" expandedHeight="32px">
              <mat-panel-title>
                {{ 'COLUMNS' | oReportsTranslate }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-selection-list dense #choices class="columns" cdkDropList (cdkDropListDropped)="drop($event)" [(ngModel)]="selectedOptions">
              <mat-list-option checkboxPosition="before" *ngFor="let choice of ordersData" [selected]="selectedOptions.includes(choice)"
                [value]="choice" cdkDrag>
                <div fxLayout="row" fxLayoutAlign="space-around center">
                  <span mat-line fxFlex>
                    {{choice | oTranslate}}
                  </span>
                  <mat-icon mat-list-icon *ngIf="selectedOptions.includes(choice)" (click)="mostrarDialogo(choice)" class="button-edit">
                    edit
                  </mat-icon>
                  <mat-icon mat-list-icon svgIcon="ontimize:drag_handle"></mat-icon>
                </div>
              </mat-list-option>
            </mat-selection-list>
          </mat-expansion-panel>

          <mat-expansion-panel class="acordions">
            <mat-expansion-panel-header collapsedHeight="32px" expandedHeight="32px">
              <mat-panel-title>
                {{ 'GROUPS' | oReportsTranslate }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-selection-list dense #choices2 class="columns" cdkDropList (cdkDropListDropped)="drop2($event)" [(ngModel)]="selectedGroups">
              <mat-list-option checkboxPosition="before" *ngFor="let choice of ordersData2" [selected]="selectedGroups.includes(choice)"
                [value]="choice" cdkDrag>
                <div fxLayout="row" fxLayoutAlign="space-around center">
                  <span mat-line fxFlex>
                    {{choice|oTranslate}}
                  </span>
                  <mat-icon mat-list-icon svgIcon="ontimize:drag_handle"></mat-icon>
                </div>
              </mat-list-option>
            </mat-selection-list>
          </mat-expansion-panel>

          <mat-expansion-panel class="acordions">
            <mat-expansion-panel-header collapsedHeight="32px" expandedHeight="32px">
              <mat-panel-title>
                {{ 'FUNCTIONS' | oReportsTranslate }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-selection-list dense #functions [(ngModel)]="selectedFunctions">
              <mat-list-option checkboxPosition="before" *ngFor="let function of ordersDataFunctions"
                [selected]="selectedFunctions.includes(function)" [value]="function">
                <div fxLayout="row" fxLayoutAlign="space-around center">
                  <span mat-line fxFlex>
                    {{ function |oTranslate }}
                  </span>
                  <button *ngIf="selectedFunctions.includes(function)" class="select" mat-icon-button (click)="selectFunction(function)"><span
                      class="material-icons">
                      edit
                    </span></button>
                </div>
              </mat-list-option>
            </mat-selection-list>
          </mat-expansion-panel>
        </mat-accordion>


        <!-- </div> -->
        <mat-dialog-actions align=center *ngIf="opened">
          <button type="button" mat-stroked-button class="mat-primary" (click)="confirmado()">
            {{'PREVIEW' | oReportsTranslate }}</button>
        </mat-dialog-actions>

      </div>
    </mat-sidenav>
    <mat-sidenav-content>
      <div class="sidenav-container-content">
        <ngx-extended-pdf-viewer #pdfViewer [base64Src]="pdf" useBrowserLocale="true" delayFirstView="1000" width [textLayer]="true">
        </ngx-extended-pdf-viewer>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
